<hr />

<p>layout: post
title: &ldquo;Ruby Notes &ndash; Structs&rdquo;
date: 2014-03-07 16:11:19 +0100
comments: true</p>

<h2>categories: [Ruby, Structs]</h2>

<p>I recently learned about Structs while working my way through <a href="http://pragmaticstudio.com/courses" target="_blank">Pragmatic Studio’s Ruby Programming course</a>, which I highly recommend btw.  If you’re a beginner like me it will apply your basic Ruby knowledge to a project and teach you some new things along the way&hellip;like Structs.</p>

<h2>What Are Structs</h2>


<p>Structs are simply a collection of attributes, meaning they only have state, whereas Classes have both attributes and methods (state and behavior).  To illustrate imagine we have a library class containing a bunch of book objects (its state) that you can check out and do other things to (its behavior). This type of object, since it has state and behavior warrants using a class.</p>

<figure class='code'><figcaption><span>Library Class</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">Library</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">initialize</span>
</span><span class='line'>      <span class="vi">@books</span> <span class="o">=</span> <span class="o">[]</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">checkout</span>
</span><span class='line'>      <span class="c1"># code to checkout a book</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now, let’s assume the book objects the library class will contain won’t have any behavior i.e. they won’t have methods, they’ll simply have attributes such as: <code>@title</code>, <code>@author</code>, and <code>@page_number</code>.  We could create a book class like this:</p>

<figure class='code'><figcaption><span>Book Class</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">Book</span>
</span><span class='line'>  <span class="kp">attr_reader</span> <span class="ss">:title</span><span class="p">,</span> <span class="ss">:author</span><span class="p">,</span> <span class="ss">:page_number</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">author</span><span class="p">,</span> <span class="n">page_number</span><span class="p">)</span>
</span><span class='line'>      <span class="vi">@title</span> <span class="o">=</span> <span class="n">title</span>
</span><span class='line'>      <span class="vi">@author</span> <span class="o">=</span> <span class="n">author</span>
</span><span class='line'>      <span class="vi">@page_number</span> <span class="o">=</span> <span class="n">page_number</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>OR since the book object has no methods we can use a Struct like so:</p>

<figure class='code'><figcaption><span>Book Struct</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="no">Book</span> <span class="o">=</span> <span class="no">Struct</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="ss">:title</span><span class="p">,</span> <span class="ss">:author</span><span class="p">,</span> <span class="ss">:page_number</span><span class="p">)</span>
</span><span class='line'><span class="c1">#=&gt; Book </span>
</span><span class='line'>
</span><span class='line'><span class="no">Book</span><span class="o">.</span><span class="n">class</span>
</span><span class='line'><span class="c1">#=&gt; Class</span>
</span></code></pre></td></tr></table></div></figure>


<p>Using a Struct required far less code than writing out the book class ourselves and by calling <code>.class</code> on Book we can see that <code>Struct.new</code> actually went and generated the book class we made above for us&hellip;pretty cool huh!</p>

<h2>Create Object Instances</h2>


<p>With this Book class we can create as many new book objects as we want by calling <code>Book.new</code> and passing it a title, author, and number of pages, like below:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">book1</span> <span class="o">=</span> <span class="no">Book</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="err">“</span><span class="no">Learn</span> <span class="n">to</span> <span class="no">Program</span><span class="err">”</span><span class="p">,</span> <span class="err">“</span><span class="no">Chris</span> <span class="no">Pine</span><span class="err">”</span><span class="p">,</span> <span class="mi">171</span><span class="p">)</span>
</span><span class='line'><span class="c1">#=&gt; &lt;struct Book title=&quot;Learn to Program&quot;, author=&quot;Chris Pine&quot;, page_number=171&gt; </span>
</span><span class='line'>
</span><span class='line'><span class="n">book2</span> <span class="o">=</span> <span class="no">Book</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="err">“</span><span class="no">The</span> <span class="no">Well</span> <span class="no">Grounded</span> <span class="no">Rubyist</span><span class="err">”</span><span class="p">,</span> <span class="err">“</span><span class="no">David</span> <span class="n">A</span><span class="o">.</span> <span class="no">Black</span><span class="err">”</span><span class="p">,</span> <span class="mi">500</span><span class="p">)</span>
</span><span class='line'><span class="c1">#=&gt; &lt;struct Book title=&quot;The Well Grounded Rubyist&quot;, author=&quot;David A. Black&quot;, page_number=500&gt; </span>
</span><span class='line'>
</span><span class='line'><span class="n">book3</span> <span class="o">=</span> <span class="no">Book</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="err">“</span><span class="no">Programming</span> <span class="no">Ruby</span> <span class="mi">1</span><span class="o">.</span><span class="mi">9</span> <span class="o">&amp;</span> <span class="mi">2</span><span class="o">.</span><span class="mi">0</span><span class="p">:</span> <span class="no">The</span> <span class="no">Pragmatic</span> <span class="no">Programmers</span> <span class="no">Guide</span> <span class="p">(</span><span class="no">The</span> <span class="no">Facets</span> <span class="n">of</span> <span class="no">Ruby</span><span class="p">)</span><span class="err">”</span><span class="p">,</span> <span class="err">“</span><span class="no">Dave</span> <span class="no">Thomas</span><span class="p">,</span> <span class="no">Andy</span> <span class="no">Hunt</span><span class="p">,</span> <span class="no">Chris</span> <span class="no">Fowler</span><span class="err">”</span><span class="p">,</span> <span class="mi">888</span><span class="p">)</span>
</span><span class='line'><span class="c1">#=&gt; &lt;struct Book title=&quot;Programming Ruby 1.9 &amp; 2.0: The Pragmatic Programmers&#39; Guide (The Facets of Ruby)&quot;, author=&quot;Dave Thomas, Andy Hunt, Chris Fowler&quot;, page_number=888&gt; </span>
</span></code></pre></td></tr></table></div></figure>


<p>This code instantiated 3 new book objects each with readable and writable attributes.  One interesting thing about these book objects is they are actually Struct objects and therefore have some handy struct methods for accessing their attributes.</p>

<h2>Accessing Attributes</h2>


<p>In addition to the normal way of accessing class attributes you can also use the <code>[]</code> method to access attributes like you would from an array by inserting the index in the brackets or like you from a hash by inserting the key in the brackets.  Here are some examples:</p>

<figure class='code'><figcaption><span>Accessing Struct Attributes </span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">book1</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span>
</span><span class='line'><span class="c1">#=&gt; “Learn to Program”</span>
</span><span class='line'>
</span><span class='line'><span class="n">book1</span><span class="o">[</span><span class="err">“</span><span class="n">title</span><span class="err">”</span><span class="o">]</span>
</span><span class='line'><span class="c1">#=&gt; “Learn to Program”</span>
</span><span class='line'>
</span><span class='line'><span class="n">book1</span><span class="o">[</span><span class="ss">:title</span><span class="o">]</span>
</span><span class='line'><span class="c1">#=&gt; “Learn to Program”</span>
</span></code></pre></td></tr></table></div></figure>


<p>As you can see you can access the <code>title</code> attribute by index or by name using a String or Symbol.</p>

<h2>Learn More About Structs</h2>




<ul>
    <li>You can see more Struct methods by checking out the <a href="http://ruby-doc.org/core-1.9.3/Struct.html" target="_blank">Struct Class doc</a>.</li>

    <li>For a more comprehensive explination of Structs read the blog post <a href="http://blog.rubybestpractices.com/posts/rklemme/017-Struct.html" target="_blank">Structs Inside and Out</a></li>

    <li>If you want to make Read-only Structs check out the <a href="https://github.com/janlelis/value_struct" target="_blank">Value Struct Gem</a> and this <a href="http://ruby.janlelis.de/65-value_struct-read-only-structs-in-ruby" target="_blank">blog post</a> about it.</li>
</ul>



